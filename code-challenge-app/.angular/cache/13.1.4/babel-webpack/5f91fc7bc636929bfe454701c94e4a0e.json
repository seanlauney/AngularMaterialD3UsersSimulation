{"ast":null,"code":"import _classCallCheck from \"/Users/slauney/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/slauney/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ChangeDetectorRef, SimpleChanges } from '@angular/core';\nimport { D3Service } from '../../d3/d3.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../d3/d3.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../d3/directives/zoomable.directive\";\nimport * as i4 from \"../shared/link-visual/link-visual.component\";\nimport * as i5 from \"../shared/node-visual/node-visual.component\";\nimport * as i6 from \"../../d3/directives/draggable.directive\";\nimport * as i7 from \"../../d3/directives/clickable.directive\";\n\nfunction GraphComponent_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 4);\n  }\n\n  if (rf & 2) {\n    var photo_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", photo_r4.picture.large, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GraphComponent_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 4);\n  }\n\n  if (rf & 2) {\n    var photo_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", photo_r5.picture.large, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GraphComponent_div_3__svg_g_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelement(0, \"g\", 10);\n  }\n\n  if (rf & 2) {\n    var link_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"linkVisual\", link_r9);\n  }\n}\n\nfunction GraphComponent_div_3__svg_g_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelement(0, \"g\", 11);\n  }\n\n  if (rf & 2) {\n    var node_r10 = ctx.$implicit;\n    var ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"nodeVisual\", node_r10)(\"draggableNode\", node_r10)(\"draggableInGraph\", ctx_r8.graph)(\"clickableNode\", node_r10);\n  }\n}\n\nfunction GraphComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 5, 6);\n    i0.ɵɵelementStart(3, \"g\", 7);\n    i0.ɵɵtemplate(4, GraphComponent_div_3__svg_g_4_Template, 1, 1, \"g\", 8);\n    i0.ɵɵtemplate(5, GraphComponent_div_3__svg_g_5_Template, 1, 4, \"g\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var _r6 = i0.ɵɵreference(2);\n\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"width\", ctx_r2._options.width)(\"height\", ctx_r2._options.height);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"zoomableOf\", _r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.links);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.nodes);\n  }\n}\n\nfunction GraphComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"h1\");\n    i0.ɵɵtext(2, \"Click the toolbar links above to add some users with friends, then watch the magic happen!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var GraphComponent = /*#__PURE__*/(function () {\n  var GraphComponent = /*#__PURE__*/function () {\n    function GraphComponent(d3Service, ref) {\n      _classCallCheck(this, GraphComponent);\n\n      this.d3Service = d3Service;\n      this.ref = ref;\n      this._options = {\n        width: 800,\n        height: 600\n      };\n    }\n\n    _createClass(GraphComponent, [{\n      key: \"onResize\",\n      value: function onResize(event) {\n        this.graph.initSimulation(this.options);\n      }\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var _this = this;\n\n        this.graph = this.d3Service.getForceDirectedGraph(this.nodes, this.links, this.options);\n        this.graph.ticker.subscribe(function (d) {\n          _this.ref.markForCheck();\n        });\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {}\n    }, {\n      key: \"ngAfterViewInit\",\n      value: function ngAfterViewInit() {\n        this.graph.initSimulation(this.options);\n      }\n    }, {\n      key: \"options\",\n      get: function get() {\n        return this._options = {\n          width: window.innerWidth,\n          height: window.innerHeight\n        };\n      }\n    }]);\n\n    return GraphComponent;\n  }();\n\n  GraphComponent.ɵfac = function GraphComponent_Factory(t) {\n    return new (t || GraphComponent)(i0.ɵɵdirectiveInject(i1.D3Service), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n\n  GraphComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GraphComponent,\n    selectors: [[\"graph\"]],\n    hostBindings: function GraphComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function GraphComponent_resize_HostBindingHandler($event) {\n          return ctx.onResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    inputs: {\n      nodes: \"nodes\",\n      links: \"links\",\n      photos: \"photos\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 5,\n    vars: 4,\n    consts: [[1, \"wrapper\"], [3, \"src\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"class\", \"center\", 4, \"ngIf\"], [3, \"src\"], [\"x\", \"100%\", \"y\", \"100%\"], [\"svg\", \"\"], [3, \"zoomableOf\"], [3, \"linkVisual\", 4, \"ngFor\", \"ngForOf\"], [3, \"nodeVisual\", \"draggableNode\", \"draggableInGraph\", \"clickableNode\", 4, \"ngFor\", \"ngForOf\"], [3, \"linkVisual\"], [3, \"nodeVisual\", \"draggableNode\", \"draggableInGraph\", \"clickableNode\"], [1, \"center\"]],\n    template: function GraphComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, GraphComponent_img_1_Template, 1, 1, \"img\", 1);\n        i0.ɵɵtemplate(2, GraphComponent_img_2_Template, 1, 1, \"img\", 1);\n        i0.ɵɵtemplate(3, GraphComponent_div_3_Template, 6, 5, \"div\", 2);\n        i0.ɵɵtemplate(4, GraphComponent_div_4_Template, 3, 0, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.photos);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.photos);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.nodes == null ? null : ctx.nodes.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.nodes == null ? null : ctx.nodes.length));\n      }\n    },\n    directives: [i2.NgForOf, i2.NgIf, i3.ZoomableDirective, i4.LinkVisualComponent, i5.NodeVisualComponent, i6.DraggableDirective, i7.ClickableDirective],\n    styles: [\".wrapper[_ngcontent-%COMP%]{position:relative;height:98vh;width:98vw}svg[_ngcontent-%COMP%]{right:0;position:absolute;top:0}.center[_ngcontent-%COMP%]{right:0;position:absolute;top:40%;left:0;background:#ff4081;color:#fff;font-family:roboto;border:1px solid white;padding-left:2em}img[_ngcontent-%COMP%]{filter:blur(3.18px)}svg[_ngcontent-%COMP%]{width:100%;height:100%}\"],\n    changeDetection: 0\n  });\n  return GraphComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}